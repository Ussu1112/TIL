프로세스(process)
---

⭐Keyword
- 실행 단위 - cpu core에서 실행하는 하나의 단위로 프로세스와 스레드를 포함하는 개념  
- 프로세스 - 하나의 스레드만 가지고 있는 단일 스레드 프로세스, 컴퓨터에서 실행되고 있는   프로그램을 말하며 CPU 스케줄링의 대상이 되는 작업(task)이라는 용어와 거의 같은 의미
- 스레드 - 프로세스를 또 한번 나눈 단위
- 동시성 - 한 순간 여러가지 일이 아니라, 짧은 전환으로 여러가지 일을 동시에 처리하는   것처럼 보이는 것  
- 메모리 영역
    - Code - 실행 명령을 포함하는 코드들
    - Data - Static 변수 혹은 Global 변수
    - Heap - 동적 메모리 영역
    - Stack - 지역변수, 매개변수, 반환 값 등등 일시적인 데이터
- PCB (Process Control Block) - 프로세스 생성시 프로세스에 대한 정보를 가진 블럭이 같이 생성



프로세스가 다른 프로세스와 통신을 하기 위해서는 IPC를 사용해야 하지만 스레드는 메모리를 공유하기 때문에 다른 스레드와의 정보공유가 쉬운 점이 있습니다. 
그러나 스레드를 기반으로 하는 프로그램의 경우 동기화 문제 등의 단점도 있습니다.  

HDD/SDD(보조기억장치)에 있는 프로그램을 메모리에 인스턴스화하면 프로그램은 프로세스가 되고 CPU 스케줄러에 따라 CPU가 프로세스를 실행합니다.

프로세스의 작동방식 

1. 병렬 처리 방법
    여러 작업을 동시에 실행, 2개 이상의 코어가 각기 다른 프로세스의 명령을 실행해서 각 프로세스가 같은 순간에 실행되도록 하는 방법

2. 병행 처리방법
    다수의 프로세스를 동시에 실행하기 위해 하나의 코어가 여러 프로세스를 조금씩 처리하면서 실행하는 방법이다. A 프로세스가 실행되는동안 B 프로세스는 준비하고있으며, B 프로세스가 실행되는동안 A 프로세스가 준비를 교차하며 실행한다. 이처럼 진행 순서를 바꾸는 것을 **컨텍스트 스위칭** 이라고 한다.

두 개의 코어가 병렬로 분담해서 각자가 맡은 프로세스를 병행해서 진행하기도 한다. 그것을 멀티 프로세싱이라고 한다.

스레드의 작동방식
스레드는 경량화된 프로세스로도 볼 수 있다. 하나의 프로세스 안에 여러 스레드가 있다고 하면 그 스레드들은 자원(코드, 데이터, 힙 영역)을 공유하고, 스택영역만 스레드별로 가지고 있다.

<br>

스레드도 프로세스와 같이 여러 스레드를 사용한다면 컨텍스트 스위칭을 통해 여러개의 작업이 병행 처리 되고 여러 스레드가 실행되는 것을 멀티 스레딩이라고 한다. 스레드가 컨텍스트 스위칭이 일어날 때 공유되는 자원은 그대로 있는 상태로 교체가 되기 때문에 프로세스에 비해 가볍다.

<br>


멀티프로세스와 멀티 스레딩 차이

- 멀티프로세스
    - 각 프로세스는 독립적
    - IPC를 사용한 통신
    - 자원이 소모적이며 개별 메모리를 많이 차지한다.
    - Context Switching 비용이 크다.
    - 동기화 작업이 필요하지 않다.

- 멀티 스레딩
    - Thread끼리 긴밀하게 연결되어 있다.
    - 공유된 자원으로 통신 비용이 절감된다.
    - 공유된 자원으로 메모리가 효율적이다.
    - Context Switching 비용이 적다.
    - 공유자원 관리를 해야한다.


이처럼 성능상 스레드가 유리하지만 주의할 점은 같은 메모리 공간을 여러 스레드가 사용하기 때문에 그 과정에서 발생할 수 있는 오류에 대비해서 프로그래밍해야 해야한다. 예를 들어 벽에 못질하는 프로세스 안에서는 여러 개의 스레드가 못 박을 위치를 공유하는데, 못의 위치를 잡는 스레드와 망치질을 하는 스레드의 타이밍이 엇갈린다면 손을 크게 다칠 수 있다. 이와 같은 일이 벌어지지 않도록 스레드를 다루는 프로그램은 시간적 요소까지 고려해서 신중하게 설계해야 한다.

멀티 스레드의 경우 프로세스에 문제가 생겼을 경우 모든 스레드를 잃을 수 있는 단점이 있다.
